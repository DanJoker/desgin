<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sqls xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="GlTransferProfit" longname="损益结转命名sql" package="cn.sunline.ltts.busi.gl.namedsql" xsi:noNamespaceSchemaLocation="ltts-model.xsd">
    <select cache="none" method="selectAll" type="sql" id="lstWaitTransferProfit" longname="查询待损益结转账户">
        <sql><![CDATA[
    	select
    	    	a.* 
    	from
    	    	faa_account a 
    	join
    	    	fap_accounting_subject b 
    	    	    	on b.gl_code = a.gl_code and a.corpno = b.corpno 
    	where
    	    	a.corpno=#org_id# 
    	    	and a.acct_bal <> 0.00 and b.gl_code_type='6' 
    	    	and b.valid_ind='Y' and a.acct_branch=#acct_branch#
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	select
    	    	a.* 
    	from
    	    	faa_account a 
    	join
    	    	fap_accounting_subject b 
    	    	    	on b.gl_code = a.gl_code and a.corpno = b.corpno 
    	where
    	    	a.corpno=#org_id# 
    	    	and a.acct_bal <> 0.00 and b.gl_code_type='6' 
    	    	and b.valid_ind='Y' and a.acct_branch=#acct_branch#
    	]]></sql>
        <sql type="db2"><![CDATA[
    	select
    	    	a.* 
    	from
    	    	faa_account a 
    	join
    	    	fap_accounting_subject b 
    	    	    	on b.gl_code = a.gl_code and a.corpno = b.corpno 
    	where
    	    	a.corpno=#org_id# 
    	    	and a.acct_bal <> 0.00 and b.gl_code_type='6' 
    	    	and b.valid_ind='Y' and a.acct_branch=#acct_branch#
    	]]></sql>
        <sql type="mysql"><![CDATA[
    	select
    	    	a.* 
    	from
    	    	faa_account a 
    	join
    	    	fap_accounting_subject b 
    	    	    	on b.gl_code = a.gl_code and a.corpno = b.corpno 
    	where
    	    	a.corpno=#org_id# 
    	    	and a.acct_bal <> 0.00 and b.gl_code_type='6' 
    	    	and b.valid_ind='Y' and a.acct_branch=#acct_branch#
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="org_id" ref="GlDict.A.org_id" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="acct_branch" ref="GlDict.A.acct_branch" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="账务机构" parameterType="condition"/>
        </parameterMap>
        <resultMap class="TabFaAccount.faa_account"/>
    </select>
    <dynamicSelect cache="none" method="selectPageWithCount" type="sql" id="lstGlbIncomeSeq" longname="查询损益结转明细登记簿">
        <parameterMap class="java.util.Map">
            <parameter property="trxndt" jdbcType="VARCHAR" javaType="GlBaseType.U_DATE" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="brchno" jdbcType="VARCHAR" javaType="BaseType.U_BRCHNO" mode="in" longname="机构号" parameterType="condition"/>
            <parameter property="org_id" ref="GlDict.A.org_id" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="TabGLBasic.glb_income_seq"/>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select * from glb_income_seq]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[corpno = #org_id#]]></str>
                    <if test="trxndt != null &amp; trxndt != ''" type="If">
                        <str type="Str"><![CDATA[trxndt = #trxndt#]]></str>
                    </if>
                    <if test="brchno != null &amp; brchno != ''" type="If">
                        <str type="Str"><![CDATA[brchno = #brchno#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by corpno,trxndt,brchno,acctno]]></str>
        </dynamicSql>
        <dynamicSql type="db2">
            <str type="Str"><![CDATA[select * from glb_income_seq]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[corpno = #org_id#]]></str>
                    <str type="Str"><![CDATA[trxndt = #trxndt#]]></str>
                    <if test="brchno != null &amp; brchno != ''" type="If">
                        <str type="Str"><![CDATA[brchno = #brchno#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by corpno,trxndt,brchno,acctno]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select * from glb_income_seq]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[corpno = #org_id#]]></str>
                    <str type="Str"><![CDATA[trxndt = #trxndt#]]></str>
                    <if test="brchno != null &amp; brchno != ''" type="If">
                        <str type="Str"><![CDATA[brchno = #brchno#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by corpno,trxndt,brchno,acctno]]></str>
        </dynamicSql>
    </dynamicSelect>
</sqls>
