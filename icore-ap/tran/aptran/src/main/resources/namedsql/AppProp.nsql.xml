<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sqls id="AppProp" longname="产品属性" package="cn.sunline.ltts.busi.aptran.namedsql" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <description><![CDATA[查询产品属性及规则]]></description>
    <dynamicSelect cache="none" method="selectPage" type="sql" id="GetRuleApplData" longname="查询产品属性规则申请">
        <parameterMap class="java.util.Map">
            <parameter property="corpno" ref="BaseDict.Comm.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="btchno" jdbcType="VARCHAR" javaType="BaseType.U_CHAR40" mode="in" longname="分组代码" parameterType="condition"/>
            <parameter property="datatp" jdbcType="VARCHAR" javaType="ApBaseEnumType.E_SHXSZBZ" mode="in" longname="数据操作类型" parameterType="condition"/>
            <parameter property="optype" jdbcType="VARCHAR" javaType="ApBaseEnumType.E_JYCHLIBZ" mode="in" longname="操作类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="AppPropRule.AppRuleApplOut"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select btchno, grupcd, rulesq, optype, datatp, rulecd, contxt, ruletx, trandt, transq, chckdt, chcksq, chckus from app_rule_appl ]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[btchno=#btchno#]]></str>
                    <str type="Str"><![CDATA[corpno=#corpno#]]></str>
                    <if test="datatp!=null" type="If">
                        <str type="Str"><![CDATA[datatp=#datatp#]]></str>
                    </if>
                    <if test="optype!=null" type="If">
                        <str type="Str"><![CDATA[optype=#optype#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by tmstmp]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select btchno, grupcd, rulesq, optype, datatp, rulecd, contxt, ruletx, trandt, transq, chckdt, chcksq, chckus from app_rule_appl ]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[btchno=#btchno#]]></str>
                    <str type="Str"><![CDATA[corpno=#corpno#]]></str>
                    <if test="datatp!=null" type="If">
                        <str type="Str"><![CDATA[datatp=#datatp#]]></str>
                    </if>
                    <if test="optype!=null" type="If">
                        <str type="Str"><![CDATA[optype=#optype#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by tmstmp]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select btchno, grupcd, rulesq, optype, datatp, rulecd, contxt, ruletx, trandt, transq, chckdt, chcksq, chckus from app_rule_appl ]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[btchno=#btchno#]]></str>
                    <str type="Str"><![CDATA[corpno=#corpno#]]></str>
                    <if test="datatp!=null" type="If">
                        <str type="Str"><![CDATA[datatp=#datatp#]]></str>
                    </if>
                    <if test="optype!=null" type="If">
                        <str type="Str"><![CDATA[optype=#optype#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by tmstmp]]></str>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectPage" type="sql" id="GetPropCtrlAppl" longname="查询产品属性申请详情">
        <parameterMap class="java.util.Map">
            <parameter property="corpno" ref="BaseDict.Comm.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="btchno" jdbcType="VARCHAR" javaType="BaseType.U_CHAR40" mode="in" longname="分组代码" parameterType="condition"/>
            <parameter property="datatp" jdbcType="VARCHAR" javaType="ApBaseEnumType.E_SHXSZBZ" mode="in" longname="数据操作类型" parameterType="condition"/>
            <parameter property="optype" jdbcType="VARCHAR" javaType="ApBaseEnumType.E_JYCHLIBZ" mode="in" longname="操作类型" parameterType="condition"/>
        </parameterMap>
        <resultMap class="AppPropRule.AppPropCtrlApplOut"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select btchno, optype, datatp, prodcd, tablcd, fildcd, fildnm, fildtp, finlfg, nullfg, fildvl, fildmu, fildcv, fildtx, nullab, enmuid, tempcd, trandt,
 transq, chckdt, chcksq, chckus from app_prop_ctrl_appl]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[btchno=#btchno#]]></str>
                    <str type="Str"><![CDATA[corpno=#corpno#]]></str>
                    <if test="datatp!=null" type="If">
                        <str type="Str"><![CDATA[datatp=#datatp#]]></str>
                    </if>
                    <if test="optype!=null" type="If">
                        <str type="Str"><![CDATA[optype=#optype#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by tmstmp]]></str>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select btchno, optype, datatp, prodcd, tablcd, fildcd, fildnm, fildtp, finlfg, nullfg, fildvl, fildmu, fildcv, fildtx, nullab, enmuid, tempcd, trandt,
 transq, chckdt, chcksq, chckus from app_prop_ctrl_appl]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[btchno=#btchno#]]></str>
                    <str type="Str"><![CDATA[corpno=#corpno#]]></str>
                    <if test="datatp!=null" type="If">
                        <str type="Str"><![CDATA[datatp=#datatp#]]></str>
                    </if>
                    <if test="optype!=null" type="If">
                        <str type="Str"><![CDATA[optype=#optype#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by tmstmp]]></str>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select btchno, optype, datatp, prodcd, tablcd, fildcd, fildnm, fildtp, finlfg, nullfg, fildvl, fildmu, fildcv, fildtx, nullab, enmuid, tempcd, trandt,
 transq, chckdt, chcksq, chckus from app_prop_ctrl_appl]]></str>
            <where type="Where">
                <and type="And">
                    <str type="Str"><![CDATA[btchno=#btchno#]]></str>
                    <str type="Str"><![CDATA[corpno=#corpno#]]></str>
                    <if test="datatp!=null" type="If">
                        <str type="Str"><![CDATA[datatp=#datatp#]]></str>
                    </if>
                    <if test="optype!=null" type="If">
                        <str type="Str"><![CDATA[optype=#optype#]]></str>
                    </if>
                </and>
            </where>
            <str type="Str"><![CDATA[order by tmstmp]]></str>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectPage" type="sql" id="GetApDataAudit" longname="获取审计业务日志">
        <parameterMap class="java.util.Map">
            <parameter property="trandt" ref="BaseDict.Comm.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="transq" ref="BaseDict.Comm.transq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="交易流水" parameterType="condition"/>
            <parameter property="lttscd" jdbcType="VARCHAR" javaType="BaseType.U_PRCSCD" mode="in" longname="交易码" parameterType="condition"/>
            <parameter property="trsvtp" jdbcType="VARCHAR" javaType="BaseEnumType.E_SERVTP" mode="in" longname="渠道" parameterType="condition"/>
            <parameter property="userno" jdbcType="VARCHAR" javaType="BaseType.U_CUSTNO" mode="in" longname="客户号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="ApBook.ApAuditInfo"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select audseq,trandt,transq,busisq,prcscd lttscd,prcsna,tablna,
            tablds,servtp trsvtp,userid userno from apl_busi_audt]]></str>
            <where type="Where">
                <and type="And">
                    <if test="trandt!=null &amp;&amp; trandt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt=#trandt#]]></str>
                    </if>
                    <if test="transq!=null &amp;&amp; transq!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[transq=#transq#]]></str>
                    </if>
                    <if test="lttscd!=null &amp;&amp; lttscd!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[prcscd=#lttscd#]]></str>
                    </if>
                    <if test="trsvtp!=null" type="If">
                        <str type="Str"><![CDATA[servtp=#trsvtp#]]></str>
                    </if>
                    <if test="userno!=null &amp;&amp; userno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[userid=#userno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select audseq,trandt,transq,busisq,prcscd lttscd,prcsna,tablna,
            tablds,servtp trsvtp,userid userno from apl_busi_audt]]></str>
            <where type="Where">
                <and type="And">
                    <if test="trandt!=null &amp;&amp; trandt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt=#trandt#]]></str>
                    </if>
                    <if test="transq!=null &amp;&amp; transq!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[transq=#transq#]]></str>
                    </if>
                    <if test="lttscd!=null &amp;&amp; lttscd!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[prcscd=#lttscd#]]></str>
                    </if>
                    <if test="trsvtp!=null" type="If">
                        <str type="Str"><![CDATA[servtp=#trsvtp#]]></str>
                    </if>
                    <if test="userno!=null &amp;&amp; userno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[userid=#userno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select audseq,trandt,transq,busisq,prcscd lttscd,prcsna,tablna,
            tablds,servtp trsvtp,userid userno from apl_busi_audt]]></str>
            <where type="Where">
                <and type="And">
                    <if test="trandt!=null &amp;&amp; trandt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt=#trandt#]]></str>
                    </if>
                    <if test="transq!=null &amp;&amp; transq!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[transq=#transq#]]></str>
                    </if>
                    <if test="lttscd!=null &amp;&amp; lttscd!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[prcscd=#lttscd#]]></str>
                    </if>
                    <if test="trsvtp!=null" type="If">
                        <str type="Str"><![CDATA[servtp=#trsvtp#]]></str>
                    </if>
                    <if test="userno!=null &amp;&amp; userno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[userid=#userno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
    <dynamicSelect cache="none" method="selectOne" type="sql" id="SelCountApAudit" longname="查询总记录数">
        <parameterMap class="java.util.Map">
            <parameter property="trandt" ref="BaseDict.Comm.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="transq" ref="BaseDict.Comm.transq" jdbcType="VARCHAR" javaType="BaseType.U_SEQUNO" mode="in" longname="交易流水" parameterType="condition"/>
            <parameter property="lttscd" jdbcType="VARCHAR" javaType="BaseType.U_PRCSCD" mode="in" longname="交易码" parameterType="condition"/>
            <parameter property="trsvtp" jdbcType="VARCHAR" javaType="BaseEnumType.E_SERVTP" mode="in" longname="渠道" parameterType="condition"/>
            <parameter property="userno" jdbcType="VARCHAR" javaType="BaseType.U_CUSTNO" mode="in" longname="客户号" parameterType="condition"/>
        </parameterMap>
        <resultMap class="long"/>
        <dynamicSql>
            <str type="Str"><![CDATA[select nvl(count(*),0) from apl_busi_audt]]></str>
            <where type="Where">
                <and type="And">
                    <if test="trandt!=null &amp;&amp; trandt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt=#trandt#]]></str>
                    </if>
                    <if test="transq!=null &amp;&amp; transq!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[transq=#transq#]]></str>
                    </if>
                    <if test="lttscd!=null &amp;&amp; lttscd!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[prcscd=#lttscd#]]></str>
                    </if>
                    <if test="trsvtp!=null" type="If">
                        <str type="Str"><![CDATA[servtp=#trsvtp#]]></str>
                    </if>
                    <if test="userno!=null &amp;&amp; userno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[userid=#userno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="mysql">
            <str type="Str"><![CDATA[select ifnull(count(*),0) from apl_busi_audt]]></str>
            <where type="Where">
                <and type="And">
                    <if test="trandt!=null &amp;&amp; trandt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt=#trandt#]]></str>
                    </if>
                    <if test="transq!=null &amp;&amp; transq!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[transq=#transq#]]></str>
                    </if>
                    <if test="lttscd!=null &amp;&amp; lttscd!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[prcscd=#lttscd#]]></str>
                    </if>
                    <if test="trsvtp!=null" type="If">
                        <str type="Str"><![CDATA[servtp=#trsvtp#]]></str>
                    </if>
                    <if test="userno!=null &amp;&amp; userno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[userid=#userno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
        <dynamicSql type="oracle">
            <str type="Str"><![CDATA[select nvl(count(*),0) from apl_busi_audt]]></str>
            <where type="Where">
                <and type="And">
                    <if test="trandt!=null &amp;&amp; trandt!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[trandt=#trandt#]]></str>
                    </if>
                    <if test="transq!=null &amp;&amp; transq!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[transq=#transq#]]></str>
                    </if>
                    <if test="lttscd!=null &amp;&amp; lttscd!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[prcscd=#lttscd#]]></str>
                    </if>
                    <if test="trsvtp!=null" type="If">
                        <str type="Str"><![CDATA[servtp=#trsvtp#]]></str>
                    </if>
                    <if test="userno!=null &amp;&amp; userno!=&quot;&quot;" type="If">
                        <str type="Str"><![CDATA[userid=#userno#]]></str>
                    </if>
                </and>
            </where>
        </dynamicSql>
    </dynamicSelect>
</sqls>
