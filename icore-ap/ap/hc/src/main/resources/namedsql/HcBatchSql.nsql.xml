<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sqls id="HcBatchSql" longname="热点账户批量命名SQL" package="cn.sunline.ltts.busi.hc.namedsql" xsi:noNamespaceSchemaLocation="ltts-model.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <select cache="none" method="selectOne" type="sql" id="selHcbBlceDetlBytrandt" longname="热点账户上日成功交易余额汇总">
        <sql><![CDATA[
    	select
    	    	sum(tranam) tranam 
    	from
    	    	hcb_blce_detl 
    	where
    	    	hcacct = #hcacct# and trandt = #trandt# 
    	    	and amntcd = #amntcd# and corpno=#corpno#
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="hcacct" jdbcType="VARCHAR" javaType="HcBaseType.U_CHAR30" mode="in" longname="账户或产品号" parameterType="condition"/>
            <parameter property="trandt" ref="BaseDict.Comm.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="amntcd" jdbcType="VARCHAR" javaType="BaseEnumType.E_AMNTCD" mode="in" longname="借贷标志" parameterType="condition"/>
            <parameter property="corpno" ref="BaseDict.Comm.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="HcBaseType.U_TRANAM"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="selHcbBlceDetlForKey" longname="热点账户上日成功交易主体账号">
        <sql><![CDATA[
    	select
    	    	distinct hcacct 
    	from
    	    	hcb_blce_detl 
    	where
    	    	trandt = #trandt# and corpno=#corpno#
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="trandt" ref="BaseDict.Comm.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="corpno" ref="BaseDict.Comm.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="HotCtrl.HcbBlceDetl"/>
    </select>
    <dynamicSelect cache="none" method="selectOne" type="sql" id="selHcbPedlByTrandt" longname="查询热点额度待处理明细表未处理总数">
        <parameterMap class="java.util.Map">
            <parameter property="tabnum" jdbcType="VARCHAR" javaType="BaseType.U_CHAR20" mode="in" longname="表名" parameterType="condition"/>
            <parameter property="trandt" ref="BaseDict.Comm.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="detlss" jdbcType="VARCHAR" javaType="HcEnumType.E_DETLSS" mode="in" longname="处理状态" parameterType="condition"/>
            <parameter property="corpno" ref="BaseDict.Comm.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="BaseType.U_LONGIN"/>
        <dynamicSql>
            <str type="Str"><![CDATA[
                select count(1) from  ${tabnum}  where trandt = #trandt# and detlss != #detlss# and corpno=#corpno#
            ]]></str>
        </dynamicSql>
    </dynamicSelect>
    <select cache="none" method="selectAll" type="sql" id="listHcbSumyHctype" longname="分组查询热点额度节点汇总表热点类型">
        <sql><![CDATA[
    	select
    	    	distinct hctype 
    	from
    	    	hcb_sumy 
    	where
    	    	trandt = #trandt# and corpno = #corpno#]]></sql>
        <sql type="oracle"><![CDATA[
    	select
    	    	distinct hctype 
    	from
    	    	hcb_sumy 
    	where
    	    	trandt = #trandt# and corpno = #corpno#]]></sql>
        <sql type="mysql"><![CDATA[
    	select
    	    	distinct hctype 
    	from
    	    	hcb_sumy 
    	where
    	    	trandt = #trandt# and corpno = #corpno#]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="trandt" ref="BaseDict.Comm.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
            <parameter property="corpno" ref="BaseDict.Comm.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
        </parameterMap>
        <resultMap class="HcEnumType.E_HCTYPE"/>
    </select>
    <select cache="none" method="selectAll" type="sql" id="listHcbSumyByHctype" longname="根据热点类型查询热点额度节点汇总表">
        <sql><![CDATA[
    	select
    	    	distinct hcmain 
    	from
    	    	hcb_sumy 
    	where
    	    	hctype=#hctype# and trandt = #trandt# and corpno = #corpno# 
    	order by
    	    	hcmain
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	select
    	    	distinct hcmain 
    	from
    	    	hcb_sumy 
    	where
    	    	hctype=#hctype# and trandt = #trandt# and corpno = #corpno# 
    	order by
    	    	hcmain
    	]]></sql>
        <sql type="mysql"><![CDATA[
    	select
    	    	distinct hcmain 
    	from
    	    	hcb_sumy 
    	where
    	    	hctype=#hctype# and trandt = #trandt# and corpno = #corpno# 
    	order by
    	    	hcmain
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="corpno" ref="BaseDict.Comm.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="hctype" jdbcType="VARCHAR" javaType="HcEnumType.E_HCTYPE" mode="in" parameterType="condition"/>
            <parameter property="trandt" ref="BaseDict.Comm.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="HotCtrl.HcbSumy"/>
    </select>
    <select cache="none" method="selectOne" type="sql" id="countHcbSumySummamByAmtcd" longname="根据余额方向计算热点额度节点汇总表账户汇总金额">
        <sql><![CDATA[
    	select
    	    	sum(summam) as summam 
    	from
    	    	hcb_sumy 
    	where
    	    	amntcd=#amntcd# and hcmain = #hcmain# and trandt = #trandt# 
    	    	and corpno = #corpno#
    	]]></sql>
        <sql type="oracle"><![CDATA[
    	select
    	    	sum(summam) as summam 
    	from
    	    	hcb_sumy 
    	where
    	    	amntcd=#amntcd# and hcmain = #hcmain# and trandt = #trandt# 
    	    	and corpno = #corpno#
    	]]></sql>
        <sql type="mysql"><![CDATA[
    	select
    	    	sum(summam) as summam 
    	from
    	    	hcb_sumy 
    	where
    	    	amntcd=#amntcd# and hcmain = #hcmain# and trandt = #trandt# 
    	    	and corpno = #corpno#
    	]]></sql>
        <parameterMap class="java.util.Map">
            <parameter property="corpno" ref="BaseDict.Comm.corpno" jdbcType="VARCHAR" javaType="BaseType.U_CORPNO" mode="in" longname="法人代码" parameterType="condition"/>
            <parameter property="amntcd" jdbcType="VARCHAR" javaType="BaseEnumType.E_AMNTCD" mode="in" parameterType="condition"/>
            <parameter property="hcmain" jdbcType="VARCHAR" javaType="HcBaseType.U_CHAR30" mode="in" parameterType="condition"/>
            <parameter property="trandt" ref="BaseDict.Comm.trandt" jdbcType="VARCHAR" javaType="BaseType.U_DATE08" mode="in" longname="交易日期" parameterType="condition"/>
        </parameterMap>
        <resultMap class="HcBaseType.U_TRANAM"/>
    </select>
</sqls>
